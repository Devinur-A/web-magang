<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Persetujuan Magang</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    body {
      background-color: #f4e9f9;
    }

    .sidebar {
      height: 60px;
      background-color: #660f8c;
    }

    .table-container {
      max-width: 960px;
      margin: auto;
      padding: 20px;
      background-color: white;
      border-radius: 12px;
      margin-top: 30px;
    }

    .badge {
      font-size: 0.8rem;
      border-radius: 8px;
      padding: 5px 10px;
    }

    .badge-disetujui {
      background-color: #d1f7d6;
      color: #1a7e3b;
    }

    .badge-ditolak {
      background-color: #f9d2d2;
      color: #a12d2d;
    }

    .badge-diproses {
      background-color: #fff3cd;
      color: #856404;
    }

    .pagination .page-link {
      color: #660f8c;
    }

    .pagination .active .page-link {
      background-color: #660f8c;
      border-color: #660f8c;
      color: white;
    }

    .table-search {
      max-width: 300px;
    }
  </style>
</head>
<body>

<!-- Sidebar Header -->
<div class="sidebar px-3 d-flex align-items-center">
  <nav class="navbar navbar-custom w-100">
    <div class="container-fluid">
      <a href="dashboard.html" class="d-flex align-items-center text-white text-decoration-none">
        <i class="bi bi-arrow-left"></i>
        <span class="ms-2 fw-semibold" style="font-size: 1.1rem;">Persetujuan Magang</span>
      </a>
    </div>
  </nav>
</div>

<!-- Tabel dan Pencarian -->
<div class="container table-container">
  <div class="d-flex justify-content-between mb-3">
    <h5>Daftar Pengajuan Mahasiswa</h5>
    <input type="text" id="searchInput" class="form-control table-search" placeholder="Cari mahasiswa..." onkeyup="filterData()" />
  </div>

  <div class="table-responsive">
    <table class="table table-bordered text-center align-middle" id="mahasiswaTable">
      <thead class="table-light">
        <tr>
          <th>Mahasiswa</th>
          <th>NIM</th>
          <th>Perusahaan</th>
          <th>Tanggal</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody id="tableBody"></tbody>
    </table>
  </div>

  <div class="d-flex justify-content-between align-items-center mt-3">
    <small id="totalInfo"></small>
    <nav>
      <ul class="pagination pagination-sm mb-0" id="pagination"></ul>
    </nav>
  </div>
</div>

<script>
  const data = Array.from({ length: 42 }, (_, i) => ({
    nama: `Mahasiswa ${i + 1}`,
    nim: `24.01.${5000 + i}`,
    perusahaan: `PT Perusahaan ${i % 5 + 1}`,
    tanggal: `${(10 + i) % 28 + 1} Mei 2025`,
    status: i % 3 === 0 ? "Disetujui" : i % 3 === 1 ? "Ditolak" : "Diproses"
  }));

  let currentPage = 1;
  const rowsPerPage = 6;
  let filteredData = [...data];

  function displayTable(dataArr, page) {
    const tableBody = document.getElementById("tableBody");
    const start = (page - 1) * rowsPerPage;
    const end = start + rowsPerPage;
    const paginatedData = dataArr.slice(start, end);

    tableBody.innerHTML = paginatedData.map(item => `
      <tr>
        <td>${item.nama}</td>
        <td>${item.nim}</td>
        <td>${item.perusahaan}</td>
        <td>${item.tanggal}</td>
        <td>
          <span class="badge ${item.status === 'Disetujui' ? 'badge-disetujui' : item.status === 'Ditolak' ? 'badge-ditolak' : 'badge-diproses'}">
            ${item.status}
          </span>
        </td>
      </tr>
    `).join("");

    document.getElementById("totalInfo").textContent = `Menampilkan ${start + 1} - ${Math.min(end, dataArr.length)} dari ${dataArr.length} data`;
  }

  function setupPagination(dataArr) {
    const pagination = document.getElementById("pagination");
    const pageCount = Math.ceil(dataArr.length / rowsPerPage);
    pagination.innerHTML = "";

    for (let i = 1; i <= pageCount; i++) {
      const li = document.createElement("li");
      li.className = `page-item ${i === currentPage ? "active" : ""}`;
      li.innerHTML = `<a class="page-link" href="#">${i}</a>`;
      li.addEventListener("click", (e) => {
        e.preventDefault();
        currentPage = i;
        displayTable(filteredData, currentPage);
        setupPagination(filteredData);
      });
      pagination.appendChild(li);
    }
  }

  function filterData() {
    const search = document.getElementById("searchInput").value.toLowerCase();
    filteredData = data.filter(d => d.nama.toLowerCase().includes(search));
    currentPage = 1;
    displayTable(filteredData, currentPage);
    setupPagination(filteredData);
  }
  
  displayTable(filteredData, currentPage);
  setupPagination(filteredData);
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
